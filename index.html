<html>
  <head>
    <title>DraggingBlog - Home</title>
    <link rel="stylesheet" href="Styles/base.css">
  </head>
  <body>
    <div class="main">

    <div class="scrolling">
    <marquee scrolldelay="2" truespeed="true" scrollamount="1" class="scrolling">
    Draggin Group 2024 - the shits and giggles game organization behind: Box Drag
    </marquee>
    </div>

    <section>
      <p class="title">
        DRAGGING BLOG by DRAGGINGROUP
      </p>
      <pre id="message">Latest Commit: "Initial commit" by Github</pre>
      
      <p>
        the blog for all things Dragging related!
      </p>
    </section>

    <div class="scrolling">
    <marquee scrolldelay="2" truespeed="true" scrollamount="1" class="scrolling">
    Work In Progress blog site - Draggin Group
    </marquee>
    </div>
    </div>

    <script>
      fetch('https://api.github.com/repos/DragginGroup/Blog/commits?per_page=1').then(res => res.json()).then(res => {
        var commit = res[0].commit
        var msg = 'Latest Commit: "' + getLatestCommitHash() + '/' + commit.message +'" by ' + commit.author.name
        
        document.getElementById('message').innerHTML = msg
        if (document.getElementById('message').innerHTML !== msg) {
          document.getElementById('message').innerHTML = 'Latest Commit: "' + res[0].commit.message+'"'
        }
      })

      function getLatestCommitHash() {
        const rev = fs.readFileSync('.git/HEAD').toString().trim();
        if (rev.indexOf(':') === -1) {
          return rev;
        } else {
          return fs.readFileSync('.git/' + rev.substring(5)).toString().trim();
        }
      }
    </script>
  </body>
</html>

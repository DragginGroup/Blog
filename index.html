<html>
  <head>
    <!-- Web Page Name -->
    <title>DraggingBlog - Home</title>
    
    <!-- Styles Used -->
    <link rel="stylesheet" href="Styles/base.css">
    
  </head>
  <body>
    <!-- Background Class -->
    <div class="main">

    <!-- Scrolling Text that shows products of DragginGroup -->
    <div class="scrolling">
    
      <marquee scrolldelay="2" truespeed="true" scrollamount="1" class="scrolling">
        Draggin Group 2024 - the shits and giggles game organization behind: Box Drag
      </marquee>
      
    </div>

    <!-- This Section holds the title, Latest Commit, and the blog "slogan" -->
    <section>
      
      <!-- Title -->
      <p class="title">
        DRAGGING BLOG by DRAGGINGROUP
      </p>

      <!-- Commit Message -->
      <pre id="message">Latest Commit: "Initial commit" by Github</pre>

      <!-- Slogan and probably an explanation to DragginGroup later down the line -->
      <p>
        the blog for all things Dragging related!
      </p>
      
    </section>

    <!-- W.I.P. Scrolling Text -->
    <div class="scrolling">
      
    <marquee scrolldelay="2" truespeed="true" scrollamount="1" class="scrolling">
    Work In Progress blog site - Draggin Group
    </marquee>
      
    </div>
      
    </div>

    <!-- Javascript Code for Latest Commit Message -->
    <script>
      // Fetch the Latest Commit API Data
      fetch('https://api.github.com/repos/DragginGroup/Blog/commits?per_page=1').then(res => res.json()).then(res => {
        // Variables
        var commit = res[0].commit
        var msg = 'Latest Commit: "' + getLatestCommitHash() + '/' + commit.message +'" by ' + commit.author.name

        // Set the Message
        document.getElementById('message').innerHTML = msg
        if (document.getElementById('message').innerHTML !== msg) {
          document.getElementById('message').innerHTML = 'Latest Commit: "' + res[0].commit.message+'"'
        }
      })

      // This function explains itself.
      function getLatestCommitHash() {
        const rev = fs.readFileSync('.git/HEAD').toString().trim();
        if (rev.indexOf(':') === -1) {
          return rev;
        } else {
          return fs.readFileSync('.git/' + rev.substring(5)).toString().trim();
        }
      }
    </script>
  </body>
</html>
